<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45b4de35-e668-4501-b8cd-711c64060c4e%2F5296676_ocean_sea_splash_surf_water_icon.png?table=collection&amp;id=6203be97-46d6-4bfc-9ce6-4457199ab784">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Xcode12环境CocoaPods校验和打包出现的问题&nbsp;|&nbsp;RadioHeadache</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Xcode12环境CocoaPods校验和打包出现的问题">
  
    <meta name="description" content="CocoaPods 关于 arm64 架构模拟器的错误">
    <meta property="og:description" content="CocoaPods 关于 arm64 架构模拟器的错误">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45b4de35-e668-4501-b8cd-711c64060c4e%2F5296676_ocean_sea_splash_surf_water_icon.png?table=collection&amp;id=6203be97-46d6-4bfc-9ce6-4457199ab784"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="iOS-Dev-Articles.html">
        <div class="Navbar__Btn">
          
          <span>📱iOS Articles</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="daily-logs.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🔖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Daily Log</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="newsletter.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📟&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Newsletter</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">Xcode12环境CocoaPods校验和打包出现的问题</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Tue, Mar 16, 2021</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/iOS-Dev.html">iOS-Dev</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/Xcode.html">Xcode</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
            <a href="tag/CocoaPods.html">CocoaPods</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/2964a98ec80a4a21adc32de07049433b" class="PageRoot"><ul id="https://www.notion.so/c813b499f0914d878226d7d0bc3606b5" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/0df56bfa023b453fb4563940c779c706"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">CocoaPods校验的报错</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7719cf09185546818bb851b88298aec4"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">CocoaPods打包的报错</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">出现问题的原因</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/14295a958a8348d5a44335f9353ecc1f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">详细的原因</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">解决方案</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">一个疑问</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f92f038aad094970be059f1e416c5917"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">延伸阅读</span></span></div></a></li></ul><h1 id="https://www.notion.so/0df56bfa023b453fb4563940c779c706" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/0df56bfa023b453fb4563940c779c706"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">CocoaPods校验的报错</span></span></h1><div id="https://www.notion.so/dcf8dcba7b404d2f9afdb28b63660de4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">最近，我执行</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">pod lib lint --verbose --no-clean --verbose --allow-warnings</code></span><span class="SemanticString">校验CocoaPods，结果却是一个以前没有见过的错误：</span></span></p></div><pre id="https://www.notion.so/789df61640644a0a8b1102d082eac015" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ld: building for iOS Simulator, but linking in dylib built for iOS, file &#x27;/var/folders/pn/4cgjvr1j7mzbnl55pfnzlgr00000gq/T/CocoaPods-Lint-20200929-48311-11st24n-DroneKit/Pods/DJI-SDK-iOS/iOS_Mobile_SDK/DJISDK.framework/DJISDK&#x27; for architecture arm64 clang: error: linker command failed with exit code 1 (use -v to see invocation)</span></span></span></code></pre><div id="https://www.notion.so/a28fd85083b045f294ffd176d5912e5a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">GitHub Issue：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/CocoaPods/CocoaPods/issues/10104">https://github.com/CocoaPods/CocoaPods/issues/10104</a></span></span></p></div><h1 id="https://www.notion.so/7719cf09185546818bb851b88298aec4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7719cf09185546818bb851b88298aec4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">CocoaPods打包的报错</span></span></h1><div id="https://www.notion.so/0b5f993827b94f5bbe0226c194093710" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在执行</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">pod package</code></span><span class="SemanticString">时也出现了跟arm64架构有关的错误</span></span></p></div><pre id="https://www.notion.so/96bfe6b21ebd4163af71acdc1fc365c1" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>fatal error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/lipo: Pods/build/package.a and Pods/build-sim/package.a have the same architectures (arm64) and can&#x27;t be in the same fat output file</span></span></span></code></pre><div id="https://www.notion.so/037106f3ce0d43e58651fc5f4afc04c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Github Issue：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/CocoaPods/cocoapods-packager/issues/259">https://github.com/CocoaPods/cocoapods-packager/issues/259</a></span></span></p></div><h1 id="https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">出现问题的原因</span></span></h1><div id="https://www.notion.so/88886cde7b97472f84cf822dab9320b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">根据</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://milanpanchal24.medium.com/xcode-12-building-for-ios-simulator-but-linking-in-object-file-built-for-ios-file-for-8c0cc28ec832">这篇Medium的文章</a></span><span class="SemanticString">，由于我们的项目对于架构的设置是默认的：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ARCHS_STANDARD</code></span><span class="SemanticString">，随着Xcode 12 的正式发布，苹果在这个字段里面加入了arm64架构的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">模拟器</strong></span><span class="SemanticString">，⚠️注意，是模拟器。</span></span></p></div><div id="https://www.notion.so/d77f175aa478443d8dfaeec64d65494c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">随着苹果的Apple Silicon计划和M1芯片的推出，Xcode为了适配arm64架构的Mac，让M1的用户可以在模拟器上调试，苹果加入了arm64架构模拟器的字段，导致了CocoaPods校验和打包的报错。</span></span></p></div><h2 id="https://www.notion.so/14295a958a8348d5a44335f9353ecc1f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/14295a958a8348d5a44335f9353ecc1f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">详细的原因</span></span></h2><div id="https://www.notion.so/ec4814c7cea345e3a6c114c8112979e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">至于详细的原因，</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://stackoverflow.com/a/64591869/7281087">这篇StackOverFLow的回答</a></span><span class="SemanticString">给出了答案，下面粘贴部分内容并翻译（大部分使用DeepL翻译后校对）：</span></span></p></div><blockquote id="https://www.notion.so/3e79be7afde1470982718a7404fe2f8f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">The Build Settings editor no longer includes the Valid Architectures build setting &quot;VALID ARCHS&quot;, and its use is discouraged. Instead, there is a new Excluded Architectures build setting (EXCLUDED ARCHS)</span></span></blockquote><div id="https://www.notion.so/f80b105356d640c4b85dfbd2b1e72564" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">构建设置编辑器不再包含有效的架构构建设置 &quot;VALID ARCHS&quot;，并且不鼓励使用它。取而代之的是一个新的排除架构构建设置（EXCLUDED ARCHS）。</span></span></p></div><blockquote id="https://www.notion.so/2ac0340be5ec444c82d83e08c0a42559" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Xcode 12 is actually the stepping stone for Apple Silicon which unfortunately is not yet available. But with that platform, we are gonna get arm64 based macOS where simulators will also run on arm64 architecture unlike the present Intel-based x86_64 architecture.</span></span></blockquote><div id="https://www.notion.so/1779aeb676fc4868b82b0645034255df" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Xcode 12其实是苹果Silicon的垫脚石，可惜目前还没有上市。但有了这个平台，我们使用基于arm64的macOS，其中模拟器也将运行在arm64架构上，而不像现在基于英特尔的x86_64架构。</span></span></p></div><blockquote id="https://www.notion.so/dc2db0e94841454d9f378d8af74cc15d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Xcode usually depends on the &quot;Run Destination&quot; to build its libraries/apps. So when a simulator is chosen as the &quot;Run Destination&quot;, it builds the app for available simulator architectures and when a device is chosen as the &quot;Run Destination&quot; it builds for the architecture that the device supports (arm*).</span></span></blockquote><div id="https://www.notion.so/e9036452a150435aa96dc51076487c33" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Xcode通常依赖于 &quot;运行目的地 (Run Destination)&quot;来构建它的库/应用程序。因此，当模拟器被选择为 &quot;运行目的地(Run Destination) &quot;时，它会为可用的模拟器架构构建应用程序，而当设备被选择为 &quot;运行目的地 &quot;时，它会为设备支持的架构（arm*）构建。</span></span></p></div><blockquote id="https://www.notion.so/eff65884c68c499e9538c89d5213fd21" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">xcodebuild, in the Xcode 12+ build system, considers arm64 as a valid architecture for the simulator. So when a simulator is chosen as the run destination, it can potentially try to compile/link your libs/apps against arm64 based simulators as well (not available yet). So it sends clang(++) some -target flag like arm64-apple-ios13.0-simulator in --- format and clang tries to build/link against arm64 based simulator that eventually fails on Intel-based mac.</span></span></blockquote><div id="https://www.notion.so/ffc5d18a791440fb807dcaae07e29783" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">xcodebuild，在Xcode 12+构建系统中，认为arm64是模拟器的有效架构。所以当一个模拟器被选择为运行目标时，它有可能会尝试对基于arm64的模拟器也编译/链接你的lib/apps（目前还没有）(2021.3.16注：已经有了)。因此，它向clang(++)发送一些-target标志，如arm64-apple-ios13.0-simulator，格式为----，然后clang就会尝试对基于arm64的模拟器进行编译/链接，最终在基于Intel的Mac上失败。</span></span></p></div><blockquote id="https://www.notion.so/2504b7db33af49a68dcc336fe0fd78d5" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">But xcodebuild tries this only for Release builds. Why? Because, &quot;Build Active Architecture Only (ONLY_ACTIVE_ARCH)&quot; build settings is usually set to &quot;No&quot; for the &quot;Release&quot; configuration only. And that means xcodebuild will try to build all architectural variants of your libs/apps for the selected run destination for release builds. And for the Simulator run destination, it will includes both x86_64 and arm64 now on, since arm64 in Xcode 12+ is also a supported architecture for simulators to support Apple Silicon.</span></span></blockquote><div id="https://www.notion.so/7265681b121846918ed7053e4a14825b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">但xcodebuild只在Release构建时才会尝试这样做。为什么呢？因为，&quot;仅构建活动架构(ONLY_ACTIVE_ARCH) &quot;构建设置通常只在 &quot;Release &quot;配置中设置为 &quot;No&quot;。这意味着xcodebuild将尝试为所选的运行目标构建发行版构建的所有lib/apps的架构变体。对于模拟器的运行目标，它将包括x86_64和arm64，因为在Xcode 12+中arm64也是模拟器支持的架构，以支持Apple Silicon。</span></span></p></div><blockquote id="https://www.notion.so/6f27f5fd292344318330457e2abb1f36" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Simply putting, Xcode will fail to build your app anytime it tries the command line, xcodebuild, (which defaults to release build, see the general tab of your project setting) or otherwise in release mode. So a simple workaround to this issue is to set &quot;Build Active Architecture Only (ONLY_ACTIVE_ARCH)&quot; to Yes in your libraries/apps, even for release mode.</span></span></blockquote><div id="https://www.notion.so/a638b6f81f1545769b73bcc507330d1a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">简单地说，Xcode在任何时候尝试命令行、xcodebuild（默认为release build，见项目设置的general选项卡）或其他release模式下，都会导致你的应用程序构建失败。所以这个问题的一个简单的变通方法就是在你的库/应用中把 &quot;仅构建活动架构（ONLY_ACTIVE_ARCH）&quot;设置为 &quot;是&quot;，即使是发布模式。</span></span></p></div><h1 id="https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">解决方案</span></span></h1><div id="https://www.notion.so/33fd6dfa70c34285aa056a253129d98b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">目前似乎只有临时的解决方案，就是在podspec文件里添加两行绕过arm64架构模拟器的配置：</span></span></p></div><pre id="https://www.notion.so/ae0d3a318c754b5b8db52c34af6d7faa" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s<span class="token punctuation">.</span>pod_target_xcconfig <span class="token operator">=</span> <span class="token punctuation">{</span> 
<span class="token string">'EXCLUDED_ARCHS[sdk=iphonesimulator*]'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'arm64'</span> 
<span class="token punctuation">}</span>
s<span class="token punctuation">.</span>user_target_xcconfig <span class="token operator">=</span> <span class="token punctuation">{</span> 
<span class="token string">'EXCLUDED_ARCHS[sdk=iphonesimulator*]'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'arm64'</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/09000206cab046af9a7d7d15a6f7be74" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">根据大家的描述：</span></span></p></div><blockquote id="https://www.notion.so/f71e7c6abaae4368a6e7be52443bbc1c" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">This will eventually be a problem when we are running on Apple Silicon Macs, but for now we&#x27;ll be OK.</span></span></blockquote><div id="https://www.notion.so/f1f6c1232ffb4ba6b0319ef756405933" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">一个疑问</span></span></h1><div id="https://www.notion.so/92594960172b4c0585203d1dd95250db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果在podspec上设置绕开了arm64架构的模拟器，那开发者不就没有办法在M1的Mac上面使用模拟器调试了吗？该怎么样让自己的库适配arm64的模拟器呢？</span></span></p></div><h1 id="https://www.notion.so/f92f038aad094970be059f1e416c5917" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f92f038aad094970be059f1e416c5917"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">延伸阅读</span></span></h1><ol class="NumberedListWrapper"><li id="https://www.notion.so/396e4de0070e4eea814d0b1ad4d5de26" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://medium.com/macoclock/deep-drive-xcode-build-settings-827c3ce4811c">Deep dive — Xcode Build Settings</a></span></span></li><li id="https://www.notion.so/fc5a3f3718d24948acdbd0fe295d91ce" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://medium.com/@johny.urgiles/wrestling-with-xcode-12-and-arm64-6c7977922abb">Wrestling with Xcode 12 and ARM64</a></span></span></li><li id="https://www.notion.so/4f911d71486c4cea8f311ef4f114a892" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"> </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://juejin.cn/post/6881424216504139789">关于XCode12 + iOS14的Cell ContentView 显示层级bug的探究。</a></span></span></li><li id="https://www.notion.so/712fbddd57034607bd14a0a70f3cbf2c" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.jianshu.com/p/19094220ed2a">mac M1芯片 arm64架构 pod安装踩坑记录</a></span></span></li></ol></article>
  <footer class="Footer">
  <div>&copy; RadioHeadache 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>