<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45b4de35-e668-4501-b8cd-711c64060c4e%2F5296676_ocean_sea_splash_surf_water_icon.png?table=collection&amp;id=6203be97-46d6-4bfc-9ce6-4457199ab784">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Xcode12ç¯å¢ƒCocoaPodsæ ¡éªŒå’Œæ‰“åŒ…å‡ºç°çš„é—®é¢˜&nbsp;|&nbsp;RadioHeadache</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Xcode12ç¯å¢ƒCocoaPodsæ ¡éªŒå’Œæ‰“åŒ…å‡ºç°çš„é—®é¢˜">
  
    <meta name="description" content="CocoaPods å…³äº arm64 æ¶æ„æ¨¡æ‹Ÿå™¨çš„é”™è¯¯">
    <meta property="og:description" content="CocoaPods å…³äº arm64 æ¶æ„æ¨¡æ‹Ÿå™¨çš„é”™è¯¯">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45b4de35-e668-4501-b8cd-711c64060c4e%2F5296676_ocean_sea_splash_surf_water_icon.png?table=collection&amp;id=6203be97-46d6-4bfc-9ce6-4457199ab784"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="iOS-Dev-Articles.html">
        <div class="Navbar__Btn">
          
          <span>ğŸ“±iOS Articles</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="daily-logs.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ”–&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Daily Log</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ˜€&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="newsletter.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ“Ÿ&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Newsletter</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">Xcode12ç¯å¢ƒCocoaPodsæ ¡éªŒå’Œæ‰“åŒ…å‡ºç°çš„é—®é¢˜</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Tue, Mar 16, 2021</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/iOS-Dev.html">iOS-Dev</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/Xcode.html">Xcode</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
            <a href="tag/CocoaPods.html">CocoaPods</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/2964a98ec80a4a21adc32de07049433b" class="PageRoot"><ul id="https://www.notion.so/c813b499f0914d878226d7d0bc3606b5" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/0df56bfa023b453fb4563940c779c706"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">CocoaPodsæ ¡éªŒçš„æŠ¥é”™</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7719cf09185546818bb851b88298aec4"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">CocoaPodsæ‰“åŒ…çš„æŠ¥é”™</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">å‡ºç°é—®é¢˜çš„åŸå› </span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/14295a958a8348d5a44335f9353ecc1f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">è¯¦ç»†çš„åŸå› </span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">è§£å†³æ–¹æ¡ˆ</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">ä¸€ä¸ªç–‘é—®</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f92f038aad094970be059f1e416c5917"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">å»¶ä¼¸é˜…è¯»</span></span></div></a></li></ul><h1 id="https://www.notion.so/0df56bfa023b453fb4563940c779c706" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/0df56bfa023b453fb4563940c779c706"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">CocoaPodsæ ¡éªŒçš„æŠ¥é”™</span></span></h1><div id="https://www.notion.so/dcf8dcba7b404d2f9afdb28b63660de4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æœ€è¿‘ï¼Œæˆ‘æ‰§è¡Œ</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">pod lib lint --verbose --no-clean --verbose --allow-warnings</code></span><span class="SemanticString">æ ¡éªŒCocoaPodsï¼Œç»“æœå´æ˜¯ä¸€ä¸ªä»¥å‰æ²¡æœ‰è§è¿‡çš„é”™è¯¯ï¼š</span></span></p></div><pre id="https://www.notion.so/789df61640644a0a8b1102d082eac015" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ld: building for iOS Simulator, but linking in dylib built for iOS, file &#x27;/var/folders/pn/4cgjvr1j7mzbnl55pfnzlgr00000gq/T/CocoaPods-Lint-20200929-48311-11st24n-DroneKit/Pods/DJI-SDK-iOS/iOS_Mobile_SDK/DJISDK.framework/DJISDK&#x27; for architecture arm64 clang: error: linker command failed with exit code 1 (use -v to see invocation)</span></span></span></code></pre><div id="https://www.notion.so/a28fd85083b045f294ffd176d5912e5a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">GitHub Issueï¼š</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/CocoaPods/CocoaPods/issues/10104">https://github.com/CocoaPods/CocoaPods/issues/10104</a></span></span></p></div><h1 id="https://www.notion.so/7719cf09185546818bb851b88298aec4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7719cf09185546818bb851b88298aec4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">CocoaPodsæ‰“åŒ…çš„æŠ¥é”™</span></span></h1><div id="https://www.notion.so/0b5f993827b94f5bbe0226c194093710" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åœ¨æ‰§è¡Œ</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">pod package</code></span><span class="SemanticString">æ—¶ä¹Ÿå‡ºç°äº†è·Ÿarm64æ¶æ„æœ‰å…³çš„é”™è¯¯</span></span></p></div><pre id="https://www.notion.so/96bfe6b21ebd4163af71acdc1fc365c1" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>fatal error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/lipo: Pods/build/package.a and Pods/build-sim/package.a have the same architectures (arm64) and can&#x27;t be in the same fat output file</span></span></span></code></pre><div id="https://www.notion.so/037106f3ce0d43e58651fc5f4afc04c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Github Issueï¼š</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/CocoaPods/cocoapods-packager/issues/259">https://github.com/CocoaPods/cocoapods-packager/issues/259</a></span></span></p></div><h1 id="https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/2f7e68c34e4b423099dcf57265f5e816"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">å‡ºç°é—®é¢˜çš„åŸå› </span></span></h1><div id="https://www.notion.so/88886cde7b97472f84cf822dab9320b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ ¹æ®</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://milanpanchal24.medium.com/xcode-12-building-for-ios-simulator-but-linking-in-object-file-built-for-ios-file-for-8c0cc28ec832">è¿™ç¯‡Mediumçš„æ–‡ç« </a></span><span class="SemanticString">ï¼Œç”±äºæˆ‘ä»¬çš„é¡¹ç›®å¯¹äºæ¶æ„çš„è®¾ç½®æ˜¯é»˜è®¤çš„ï¼š</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ARCHS_STANDARD</code></span><span class="SemanticString">ï¼Œéšç€Xcode 12 çš„æ­£å¼å‘å¸ƒï¼Œè‹¹æœåœ¨è¿™ä¸ªå­—æ®µé‡Œé¢åŠ å…¥äº†arm64æ¶æ„çš„</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">æ¨¡æ‹Ÿå™¨</strong></span><span class="SemanticString">ï¼Œâš ï¸æ³¨æ„ï¼Œæ˜¯æ¨¡æ‹Ÿå™¨ã€‚</span></span></p></div><div id="https://www.notion.so/d77f175aa478443d8dfaeec64d65494c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">éšç€è‹¹æœçš„Apple Siliconè®¡åˆ’å’ŒM1èŠ¯ç‰‡çš„æ¨å‡ºï¼ŒXcodeä¸ºäº†é€‚é…arm64æ¶æ„çš„Macï¼Œè®©M1çš„ç”¨æˆ·å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè°ƒè¯•ï¼Œè‹¹æœåŠ å…¥äº†arm64æ¶æ„æ¨¡æ‹Ÿå™¨çš„å­—æ®µï¼Œå¯¼è‡´äº†CocoaPodsæ ¡éªŒå’Œæ‰“åŒ…çš„æŠ¥é”™ã€‚</span></span></p></div><h2 id="https://www.notion.so/14295a958a8348d5a44335f9353ecc1f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/14295a958a8348d5a44335f9353ecc1f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">è¯¦ç»†çš„åŸå› </span></span></h2><div id="https://www.notion.so/ec4814c7cea345e3a6c114c8112979e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">è‡³äºè¯¦ç»†çš„åŸå› ï¼Œ</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://stackoverflow.com/a/64591869/7281087">è¿™ç¯‡StackOverFLowçš„å›ç­”</a></span><span class="SemanticString">ç»™å‡ºäº†ç­”æ¡ˆï¼Œä¸‹é¢ç²˜è´´éƒ¨åˆ†å†…å®¹å¹¶ç¿»è¯‘ï¼ˆå¤§éƒ¨åˆ†ä½¿ç”¨DeepLç¿»è¯‘åæ ¡å¯¹ï¼‰ï¼š</span></span></p></div><blockquote id="https://www.notion.so/3e79be7afde1470982718a7404fe2f8f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">The Build Settings editor no longer includes the Valid Architectures build setting &quot;VALID ARCHS&quot;, and its use is discouraged. Instead, there is a new Excluded Architectures build setting (EXCLUDED ARCHS)</span></span></blockquote><div id="https://www.notion.so/f80b105356d640c4b85dfbd2b1e72564" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ„å»ºè®¾ç½®ç¼–è¾‘å™¨ä¸å†åŒ…å«æœ‰æ•ˆçš„æ¶æ„æ„å»ºè®¾ç½® &quot;VALID ARCHS&quot;ï¼Œå¹¶ä¸”ä¸é¼“åŠ±ä½¿ç”¨å®ƒã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªæ–°çš„æ’é™¤æ¶æ„æ„å»ºè®¾ç½®ï¼ˆEXCLUDED ARCHSï¼‰ã€‚</span></span></p></div><blockquote id="https://www.notion.so/2ac0340be5ec444c82d83e08c0a42559" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Xcode 12 is actually the stepping stone for Apple Silicon which unfortunately is not yet available. But with that platform, we are gonna get arm64 based macOS where simulators will also run on arm64 architecture unlike the present Intel-based x86_64 architecture.</span></span></blockquote><div id="https://www.notion.so/1779aeb676fc4868b82b0645034255df" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Xcode 12å…¶å®æ˜¯è‹¹æœSiliconçš„å«è„šçŸ³ï¼Œå¯æƒœç›®å‰è¿˜æ²¡æœ‰ä¸Šå¸‚ã€‚ä½†æœ‰äº†è¿™ä¸ªå¹³å°ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºäºarm64çš„macOSï¼Œå…¶ä¸­æ¨¡æ‹Ÿå™¨ä¹Ÿå°†è¿è¡Œåœ¨arm64æ¶æ„ä¸Šï¼Œè€Œä¸åƒç°åœ¨åŸºäºè‹±ç‰¹å°”çš„x86_64æ¶æ„ã€‚</span></span></p></div><blockquote id="https://www.notion.so/dc2db0e94841454d9f378d8af74cc15d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Xcode usually depends on the &quot;Run Destination&quot; to build its libraries/apps. So when a simulator is chosen as the &quot;Run Destination&quot;, it builds the app for available simulator architectures and when a device is chosen as the &quot;Run Destination&quot; it builds for the architecture that the device supports (arm*).</span></span></blockquote><div id="https://www.notion.so/e9036452a150435aa96dc51076487c33" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Xcodeé€šå¸¸ä¾èµ–äº &quot;è¿è¡Œç›®çš„åœ° (Run Destination)&quot;æ¥æ„å»ºå®ƒçš„åº“/åº”ç”¨ç¨‹åºã€‚å› æ­¤ï¼Œå½“æ¨¡æ‹Ÿå™¨è¢«é€‰æ‹©ä¸º &quot;è¿è¡Œç›®çš„åœ°(Run Destination) &quot;æ—¶ï¼Œå®ƒä¼šä¸ºå¯ç”¨çš„æ¨¡æ‹Ÿå™¨æ¶æ„æ„å»ºåº”ç”¨ç¨‹åºï¼Œè€Œå½“è®¾å¤‡è¢«é€‰æ‹©ä¸º &quot;è¿è¡Œç›®çš„åœ° &quot;æ—¶ï¼Œå®ƒä¼šä¸ºè®¾å¤‡æ”¯æŒçš„æ¶æ„ï¼ˆarm*ï¼‰æ„å»ºã€‚</span></span></p></div><blockquote id="https://www.notion.so/eff65884c68c499e9538c89d5213fd21" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">xcodebuild, in the Xcode 12+ build system, considers arm64 as a valid architecture for the simulator. So when a simulator is chosen as the run destination, it can potentially try to compile/link your libs/apps against arm64 based simulators as well (not available yet). So it sends clang(++) some -target flag like arm64-apple-ios13.0-simulator in --- format and clang tries to build/link against arm64 based simulator that eventually fails on Intel-based mac.</span></span></blockquote><div id="https://www.notion.so/ffc5d18a791440fb807dcaae07e29783" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">xcodebuildï¼Œåœ¨Xcode 12+æ„å»ºç³»ç»Ÿä¸­ï¼Œè®¤ä¸ºarm64æ˜¯æ¨¡æ‹Ÿå™¨çš„æœ‰æ•ˆæ¶æ„ã€‚æ‰€ä»¥å½“ä¸€ä¸ªæ¨¡æ‹Ÿå™¨è¢«é€‰æ‹©ä¸ºè¿è¡Œç›®æ ‡æ—¶ï¼Œå®ƒæœ‰å¯èƒ½ä¼šå°è¯•å¯¹åŸºäºarm64çš„æ¨¡æ‹Ÿå™¨ä¹Ÿç¼–è¯‘/é“¾æ¥ä½ çš„lib/appsï¼ˆç›®å‰è¿˜æ²¡æœ‰ï¼‰(2021.3.16æ³¨ï¼šå·²ç»æœ‰äº†)ã€‚å› æ­¤ï¼Œå®ƒå‘clang(++)å‘é€ä¸€äº›-targetæ ‡å¿—ï¼Œå¦‚arm64-apple-ios13.0-simulatorï¼Œæ ¼å¼ä¸º----ï¼Œç„¶åclangå°±ä¼šå°è¯•å¯¹åŸºäºarm64çš„æ¨¡æ‹Ÿå™¨è¿›è¡Œç¼–è¯‘/é“¾æ¥ï¼Œæœ€ç»ˆåœ¨åŸºäºIntelçš„Macä¸Šå¤±è´¥ã€‚</span></span></p></div><blockquote id="https://www.notion.so/2504b7db33af49a68dcc336fe0fd78d5" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">But xcodebuild tries this only for Release builds. Why? Because, &quot;Build Active Architecture Only (ONLY_ACTIVE_ARCH)&quot; build settings is usually set to &quot;No&quot; for the &quot;Release&quot; configuration only. And that means xcodebuild will try to build all architectural variants of your libs/apps for the selected run destination for release builds. And for the Simulator run destination, it will includes both x86_64 and arm64 now on, since arm64 in Xcode 12+ is also a supported architecture for simulators to support Apple Silicon.</span></span></blockquote><div id="https://www.notion.so/7265681b121846918ed7053e4a14825b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä½†xcodebuildåªåœ¨Releaseæ„å»ºæ—¶æ‰ä¼šå°è¯•è¿™æ ·åšã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºï¼Œ&quot;ä»…æ„å»ºæ´»åŠ¨æ¶æ„(ONLY_ACTIVE_ARCH) &quot;æ„å»ºè®¾ç½®é€šå¸¸åªåœ¨ &quot;Release &quot;é…ç½®ä¸­è®¾ç½®ä¸º &quot;No&quot;ã€‚è¿™æ„å‘³ç€xcodebuildå°†å°è¯•ä¸ºæ‰€é€‰çš„è¿è¡Œç›®æ ‡æ„å»ºå‘è¡Œç‰ˆæ„å»ºçš„æ‰€æœ‰lib/appsçš„æ¶æ„å˜ä½“ã€‚å¯¹äºæ¨¡æ‹Ÿå™¨çš„è¿è¡Œç›®æ ‡ï¼Œå®ƒå°†åŒ…æ‹¬x86_64å’Œarm64ï¼Œå› ä¸ºåœ¨Xcode 12+ä¸­arm64ä¹Ÿæ˜¯æ¨¡æ‹Ÿå™¨æ”¯æŒçš„æ¶æ„ï¼Œä»¥æ”¯æŒApple Siliconã€‚</span></span></p></div><blockquote id="https://www.notion.so/6f27f5fd292344318330457e2abb1f36" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Simply putting, Xcode will fail to build your app anytime it tries the command line, xcodebuild, (which defaults to release build, see the general tab of your project setting) or otherwise in release mode. So a simple workaround to this issue is to set &quot;Build Active Architecture Only (ONLY_ACTIVE_ARCH)&quot; to Yes in your libraries/apps, even for release mode.</span></span></blockquote><div id="https://www.notion.so/a638b6f81f1545769b73bcc507330d1a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ç®€å•åœ°è¯´ï¼ŒXcodeåœ¨ä»»ä½•æ—¶å€™å°è¯•å‘½ä»¤è¡Œã€xcodebuildï¼ˆé»˜è®¤ä¸ºrelease buildï¼Œè§é¡¹ç›®è®¾ç½®çš„generalé€‰é¡¹å¡ï¼‰æˆ–å…¶ä»–releaseæ¨¡å¼ä¸‹ï¼Œéƒ½ä¼šå¯¼è‡´ä½ çš„åº”ç”¨ç¨‹åºæ„å»ºå¤±è´¥ã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªç®€å•çš„å˜é€šæ–¹æ³•å°±æ˜¯åœ¨ä½ çš„åº“/åº”ç”¨ä¸­æŠŠ &quot;ä»…æ„å»ºæ´»åŠ¨æ¶æ„ï¼ˆONLY_ACTIVE_ARCHï¼‰&quot;è®¾ç½®ä¸º &quot;æ˜¯&quot;ï¼Œå³ä½¿æ˜¯å‘å¸ƒæ¨¡å¼ã€‚</span></span></p></div><h1 id="https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/9b30ef0f35654a96a24333eecc61d50d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">è§£å†³æ–¹æ¡ˆ</span></span></h1><div id="https://www.notion.so/33fd6dfa70c34285aa056a253129d98b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ç›®å‰ä¼¼ä¹åªæœ‰ä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯åœ¨podspecæ–‡ä»¶é‡Œæ·»åŠ ä¸¤è¡Œç»•è¿‡arm64æ¶æ„æ¨¡æ‹Ÿå™¨çš„é…ç½®ï¼š</span></span></p></div><pre id="https://www.notion.so/ae0d3a318c754b5b8db52c34af6d7faa" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s<span class="token punctuation">.</span>pod_target_xcconfig <span class="token operator">=</span> <span class="token punctuation">{</span> 
<span class="token string">'EXCLUDED_ARCHS[sdk=iphonesimulator*]'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'arm64'</span> 
<span class="token punctuation">}</span>
s<span class="token punctuation">.</span>user_target_xcconfig <span class="token operator">=</span> <span class="token punctuation">{</span> 
<span class="token string">'EXCLUDED_ARCHS[sdk=iphonesimulator*]'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'arm64'</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/09000206cab046af9a7d7d15a6f7be74" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ ¹æ®å¤§å®¶çš„æè¿°ï¼š</span></span></p></div><blockquote id="https://www.notion.so/f71e7c6abaae4368a6e7be52443bbc1c" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">This will eventually be a problem when we are running on Apple Silicon Macs, but for now we&#x27;ll be OK.</span></span></blockquote><div id="https://www.notion.so/f1f6c1232ffb4ba6b0319ef756405933" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/baae37d18865467a9ccb9c151d5c0c32"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ä¸€ä¸ªç–‘é—®</span></span></h1><div id="https://www.notion.so/92594960172b4c0585203d1dd95250db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¦‚æœåœ¨podspecä¸Šè®¾ç½®ç»•å¼€äº†arm64æ¶æ„çš„æ¨¡æ‹Ÿå™¨ï¼Œé‚£å¼€å‘è€…ä¸å°±æ²¡æœ‰åŠæ³•åœ¨M1çš„Macä¸Šé¢ä½¿ç”¨æ¨¡æ‹Ÿå™¨è°ƒè¯•äº†å—ï¼Ÿè¯¥æ€ä¹ˆæ ·è®©è‡ªå·±çš„åº“é€‚é…arm64çš„æ¨¡æ‹Ÿå™¨å‘¢ï¼Ÿ</span></span></p></div><h1 id="https://www.notion.so/f92f038aad094970be059f1e416c5917" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f92f038aad094970be059f1e416c5917"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">å»¶ä¼¸é˜…è¯»</span></span></h1><ol class="NumberedListWrapper"><li id="https://www.notion.so/396e4de0070e4eea814d0b1ad4d5de26" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://medium.com/macoclock/deep-drive-xcode-build-settings-827c3ce4811c">Deep dive â€” Xcode Build Settings</a></span></span></li><li id="https://www.notion.so/fc5a3f3718d24948acdbd0fe295d91ce" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://medium.com/@johny.urgiles/wrestling-with-xcode-12-and-arm64-6c7977922abb">Wrestling with Xcode 12 and ARM64</a></span></span></li><li id="https://www.notion.so/4f911d71486c4cea8f311ef4f114a892" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"> </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://juejin.cn/post/6881424216504139789">å…³äºXCode12 + iOS14çš„Cell ContentView æ˜¾ç¤ºå±‚çº§bugçš„æ¢ç©¶ã€‚</a></span></span></li><li id="https://www.notion.so/712fbddd57034607bd14a0a70f3cbf2c" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.jianshu.com/p/19094220ed2a">mac M1èŠ¯ç‰‡ arm64æ¶æ„ podå®‰è£…è¸©å‘è®°å½•</a></span></span></li></ol></article>
  <footer class="Footer">
  <div>&copy; RadioHeadache 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>